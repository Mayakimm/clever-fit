<h1>Freestyle Workout</h1>

<%#= form_with url: add_exercise_workout_path(@workout, from_freestyle: params[:from_freestyle]), method: :post do |form| %>
  <%#= hidden_field_tag :from_freestyle, params[:from_freestyle] || 'false' %>

  <%#= form.label :exercise_id, 'Exercise' %>
  <%#= form.collection_select :exercise_id, Exercise.all, :id, :name %>

  <%#= form.label :kg, 'Weight (kg)' %>
  <%#= form.number_field :kg %>

  <%#= form.label :volume, 'Volume' %>
  <%#= form.number_field :volume %>

  <%#= form.submit 'Add Exercise', class: "btn btn-primary" %>
<%# end %>

<%#= link_to "Back to Workout", workout_path(@workout, from_freestyle: true), class: "btn btn-primary" %>
<%#= link_to "View Description", description_workout_path(@workout, from_freestyle: true), class: "btn btn-primary" %>
<%= form_with url: add_exercise_workout_path(@workout, from_freestyle: params[:from_freestyle]), method: :post, local: true do |form| %>
  <%= hidden_field_tag :from_freestyle, params[:from_freestyle] || 'false' %>

  <%= form.label :exercise_id, 'Exercise' %>
  <%= form.collection_select :exercise_id, Exercise.all, :id, :name, {}, { onchange: 'this.form.submit();' } %>

  <%= form.label :kg, 'Weight (kg)' %>
  <%= form.number_field :kg %>

  <%= form.label :volume, 'Volume' %>
  <%= form.number_field :volume %>

  <% if @selected_exercise %>
    <div>
      <label>Time: <%= @selected_exercise.workout_exercises.first.time.strftime("%M").to_i %></label>
      <%= form.hidden_field :time, value: @selected_exercise.workout_exercises.first.time %>
    </div>
    <div>
      <label>Calories: <%= @selected_exercise.workout_exercises.first.calories %></label>
      <%= form.hidden_field :calories, value: @selected_exercise.workout_exercises.first.calories %>
    </div>

  <% end %>

  <%= form.submit 'Add Exercise', class: "btn btn-primary" %>
<% end %>

<%= link_to "Back to Workout", workout_path(@workouts[4]), class: "btn btn-primary" %>
<%= link_to "View Description", description_workout_path(@workouts[4]), class: "btn btn-primary" %>
